window.__require=function t(e,i,o){function n(c,a){if(!i[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return n(e[c][1][t]||t)},l,l.exports,t,e,i,o)}return i[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({Play:[function(t,e,i){"use strict";cc._RF.push(e,"dbefdQH8UdPW7o4ts7FypzS","Play");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,i,c):n(e,i))||c);return r>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e=n([c],e)}(cc.Component));i.default=a,cc._RF.pop()},{}],VoiceInput:[function(t,e,i){"use strict";cc._RF.push(e,"dbb41MdLPpJwYrPAAz3XDNi","VoiceInput");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,i,c):n(e,i))||c);return r>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=t("./volume-meter"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.info=null,e.testVolume=null,e.audioContext=null,e.mediaStreamSource=null,e.meter=null,e.gotMicPermission=!1,e.warningMsg="",e}return o(e,t),e.prototype.update=function(){this.label.string="Volume: "+this.GetVolume().toFixed(6),this.info.string=this.audioContext?this.audioContext.state:this.warningMsg},e.prototype.GetMicPermission=function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(i,o){e.call(navigator,t,i,o)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});try{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.OnGetStreamSuccess.bind(this)).catch(this.OnGetStreamFail.bind(this))}catch(t){this.warningMsg="Fail getting user media "+t}},e.prototype.GetVolume=function(){return this.GotMicPermission()?(t=this.testVolume?this.testVolume:this.meter.volume,t=Math.min(1,t)):0;var t},e.prototype.OnGetStreamSuccess=function(t){try{var e=window.AudioContext||window.webkitAudioContext;this.gotMicPermission=!0,this.audioContext=new e,this.mediaStreamSource=this.audioContext.createMediaStreamSource(t),this.meter=s.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.audioContext&&this.audioContext.resume()}catch(t){alert(t)}},e.prototype.OnGetStreamFail=function(t){this.warningMsg="Fail getting user media "+t},e.prototype.GotMicPermission=function(){return this.gotMicPermission},e.prototype.GetWarningMessage=function(){return this.warningMsg},n([a(cc.Label)],e.prototype,"label",void 0),n([a(cc.Label)],e.prototype,"info",void 0),e=n([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"./volume-meter":"volume-meter"}],"volume-meter":[function(t,e,i){"use strict";function o(t){for(var e,i=t.inputBuffer.getChannelData(0),o=i.length,n=0,r=0;r<o;r++)e=i[r],Math.abs(e)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),n+=e*e;var c=Math.sqrt(n/o);this.volume=Math.max(c,this.volume*this.averaging)}cc._RF.push(e,"45331RMBjhJh4Eca2/SK5jI","volume-meter"),Object.defineProperty(i,"__esModule",{value:!0}),i.createAudioMeter=function(t,e,i,n){var r=t.createScriptProcessor(512);return r.onaudioprocess=o,r.clipping=!1,r.lastClip=0,r.volume=0,r.clipLevel=e||.98,r.averaging=i||.95,r.clipLag=n||750,r.connect(t.destination),r.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},r.shutdown=function(){this.disconnect(),this.onaudioprocess=null},r},cc._RF.pop()},{}]},{},["Play","VoiceInput","volume-meter"]);