window.__require=function t(e,i,r){function n(c,a){if(!i[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+c+"'")}}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return n(e[c][1][t]||t)},l,l.exports,t,e,i,r)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<r.length;c++)n(r[c]);return n}({Play:[function(t,e,i){"use strict";cc._RF.push(e,"dbefdQH8UdPW7o4ts7FypzS","Play");var r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,c=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(o<3?n(c):o>3?n(e,i,c):n(e,i))||c);return o>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,c=o.ccclass,a=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=n([c],e)}(cc.Component));i.default=a,cc._RF.pop()},{}],VoiceInput:[function(t,e,i){"use strict";cc._RF.push(e,"dbb41MdLPpJwYrPAAz3XDNi","VoiceInput");var r=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,c=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(o<3?n(c):o>3?n(e,i,c):n(e,i))||c);return o>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,c=o.ccclass,a=o.property,s=t("./volume-meter"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.info=null,e.testVolume=null,e.audioContext=null,e.mediaStreamSource=null,e.meter=null,e.gotMicPermission=!1,e.warningMsg="",e}return r(e,t),e.prototype.update=function(){this.label.string="Volume: "+this.GetVolume().toFixed(6),this.info.string=this.warningMsg},e.prototype.GetMicPermission=function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(i,r){e.call(navigator,t,i,r)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});try{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.OnGetStreamSuccess.bind(this)).catch(this.OnGetStreamFail.bind(this))}catch(t){this.warningMsg="Fail getting user media "+t}},e.prototype.GetVolume=function(){return this.GotMicPermission()?(t=this.testVolume?this.testVolume:this.meter.volume,t=Math.min(1,t)):0;var t},e.prototype.OnGetStreamSuccess=function(t){try{alert(12);var e=window.AudioContext||window.webkitAudioContext;this.gotMicPermission=!0,this.audioContext=new e,alert(2),this.mediaStreamSource=this.audioContext.createMediaStreamSource(t),alert(3),this.meter=s.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),alert(4)}catch(t){alert(t)}},e.prototype.OnGetStreamFail=function(t){this.warningMsg="Fail getting user media "+t},e.prototype.GotMicPermission=function(){return this.gotMicPermission},e.prototype.GetWarningMessage=function(){return this.warningMsg},n([a(cc.Label)],e.prototype,"label",void 0),n([a(cc.Label)],e.prototype,"info",void 0),e=n([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"./volume-meter":"volume-meter"}],"volume-meter":[function(t,e,i){"use strict";function r(t){for(var e,i=t.inputBuffer.getChannelData(0),r=i.length,n=0,o=0;o<r;o++)e=i[o],Math.abs(e)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),n+=e*e;var c=Math.sqrt(n/r);this.volume=Math.max(c,this.volume*this.averaging)}cc._RF.push(e,"45331RMBjhJh4Eca2/SK5jI","volume-meter"),Object.defineProperty(i,"__esModule",{value:!0}),i.createAudioMeter=function(t,e,i,n){var o=t.createScriptProcessor(512);return o.onaudioprocess=r,o.clipping=!1,o.lastClip=0,o.volume=0,o.clipLevel=e||.98,o.averaging=i||.95,o.clipLag=n||750,o.connect(t.destination),o.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},o.shutdown=function(){this.disconnect(),this.onaudioprocess=null},o},cc._RF.pop()},{}]},{},["Play","VoiceInput","volume-meter"]);