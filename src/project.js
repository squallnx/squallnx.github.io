window.__require=function t(e,n,o){function r(c,u){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var a="function"==typeof __require&&__require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}}var p=n[c]={exports:{}};e[c][0].call(p.exports,function(t){return r(e[c][1][t]||t)},p,p.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({Play:[function(t,e,n){"use strict";cc._RF.push(e,"dbefdQH8UdPW7o4ts7FypzS","Play");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var u=t.length-1;u>=0;u--)(r=t[u])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,u=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e=r([c],e)}(cc.Component));n.default=u,cc._RF.pop()},{}],VoiceInput:[function(t,e,n){"use strict";cc._RF.push(e,"dbb41MdLPpJwYrPAAz3XDNi","VoiceInput");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var u=t.length-1;u>=0;u--)(r=t[u])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,u=i.property,s=t("./volume-meter"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.info=null,e.testVolume=null,e.audioContext=null,e.mediaStreamSource=null,e.meter=null,e.gotMicPermission=!1,e.warningMsg="",e}return o(e,t),e.prototype.update=function(){this.label.string="Volume: "+this.GetVolume().toFixed(6),this.info.string=this.warningMsg},e.prototype.GetMicPermission=function(){try{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.OnGetStreamSuccess.bind(this)).catch(this.OnGetStreamFail.bind(this))}catch(t){this.warningMsg="Fail getting user media "+t}},e.prototype.GetVolume=function(){return this.GotMicPermission()?(t=this.testVolume?this.testVolume:this.meter.volume,t=Math.min(1,t)):0;var t},e.prototype.OnGetStreamSuccess=function(t){this.gotMicPermission=!0,this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(t),this.meter=s.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)},e.prototype.OnGetStreamFail=function(t){this.warningMsg="Fail getting user media "+t},e.prototype.GotMicPermission=function(){return this.gotMicPermission},e.prototype.GetWarningMessage=function(){return this.warningMsg},r([u(cc.Label)],e.prototype,"label",void 0),r([u(cc.Label)],e.prototype,"info",void 0),e=r([c],e)}(cc.Component);n.default=a,cc._RF.pop()},{"./volume-meter":"volume-meter"}],"volume-meter":[function(t,e,n){"use strict";function o(t){for(var e,n=t.inputBuffer.getChannelData(0),o=n.length,r=0,i=0;i<o;i++)e=n[i],Math.abs(e)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),r+=e*e;var c=Math.sqrt(r/o);this.volume=Math.max(c,this.volume*this.averaging)}cc._RF.push(e,"45331RMBjhJh4Eca2/SK5jI","volume-meter"),Object.defineProperty(n,"__esModule",{value:!0}),n.createAudioMeter=function(t,e,n,r){var i=t.createScriptProcessor(512);return i.onaudioprocess=o,i.clipping=!1,i.lastClip=0,i.volume=0,i.clipLevel=e||.98,i.averaging=n||.95,i.clipLag=r||750,i.connect(t.destination),i.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},i.shutdown=function(){this.disconnect(),this.onaudioprocess=null},i},cc._RF.pop()},{}]},{},["Play","VoiceInput","volume-meter"]);